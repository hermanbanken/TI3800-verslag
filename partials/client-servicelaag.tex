\subsection{Platform-onafhankelijke client}
Om in de mobiele applicatie de data van zowel SignalR als WebApi te ontsluiten is er een platform-onafhankelijke client gemaakt. Deze client bevat alle interactie met SignalR en WebApi zodat andere delen van de applicaties geen verbinding hoeven op te zetten en te onderhouden.

De client bevat dus methodes voor zaken als inloggen en registreren, welke zijn aangesloten op WebApi. Deze methodes zijn asynchroon en retourneren taken. Met de asynchrone taalelementen van C\#\footnote{\url{http://msdn.microsoft.com/en-us/library/hh191443.aspx}} kunnen eenvoudig de functies worden aangeroepen vanuit knoppen in de applicatie en worden taken afgewacht, zodat óf de voortgangs-indicator kan worden verborgen óf een foutmelding getoond kan worden.

De data die vanuit SignalR binnenkomt wordt als ``Observable'' weergegeven. Observables zijn taalelementen van C\# uit \ac{rx} en kunnen worden gezien als objecten die functies uitvoeren als er nieuwe data binnenkomt, door een functie te ``subscriben'' op een Observable. De data vanuit SignalR heeft het karakter van bijvoorbeeld \textit{de actuele snelheid van gebruiker X}. De Observable heet dan CurrentSpeed en een voorbeeld van een functie is er een die de snelheid op het telefoonscherm aanpast aan de net binnengekomen snelheid.

\subsection{Lokale opslag met Akavache}
Mobiele applicaties moeten anders omgaan met data dan desktop-applicaties in die zin dat mobiele applicaties elk moment gesloten kunnen worden. Telefoons hebben een beperkte hoeveelheid geheugen, en als het OS van de telefoon detecteert dat er te weinig geheugen vrij is kan een niet zichtbare applicatie abrupt worden afgesloten. Als een gebruiker onze applicatie even onderbreekt om een andere applicatie te bekijken dan kan de applicatie dus zomaar worden afgesloten. Om bij het terug komen in de applicatie na het afsluiten niet een leeg scherm te hoeven tonen, moeten we data opslaan op het permanente geheugen van de telefoon. Hiervoor gebruiken we Akavache\footnote{\url{https://github.com/akavache/Akavache}}.

Akavache is een library voor asynchrone en persitente key-value opslag voor C\# applicaties. Met Akavache is eenvoudig te checken of een model al geladen is, het eventueel nog te downloaden en dan op te vragen. 

Aangezien de ViewModels, die ook later nog aan bod komen in sectie ~\ref{sec:vm-reactive-ui}, niet opgeslagen kunnen worden (sommige eigenschappen kunnen niet worden geserialiseerd) moet er nog een vertaalslag plaatsvinden tussen de opgeslagen entiteiten en de ViewModels. Onze platform-onafhankelijke client doet dit voor alle entiteiten en zorgt er voor dat  de ViewModels in stand blijven gedurende de hele tijd dat de applicatie draait. Eventuele wijzigingen worden aangepast in de ViewModels, maar de ViewModels worden nooit vervangen.